# SonarQube Configuration for ADOPTME Backend
# ============================================
# Este archivo configura qué analiza y qué ignora SonarQube

# Project Key (debe coincidir con el proyecto en SonarQube)
sonar.projectKey=adoptme-backend
sonar.projectName=ADOPTME Backend
sonar.projectVersion=1.0.0

# Source code
sonar.sources=.
sonar.sourceEncoding=UTF-8

# ============================================
# EXCLUSIONES - Lo que SonarQube NO debe analizar
# ============================================

# Excluir tests - NO analizar archivos de test
sonar.exclusions=\
  **/__tests__/**,\
  **/tests/**,\
  **/*.test.js,\
  **/*.spec.js,\
  jest.config.js,\
  jest.setup.js

# Excluir coverage - NO incluir reporte de coverage en análisis
sonar.coverage.exclusions=\
  **/__tests__/**,\
  **/tests/**,\
  coverage/**,\
  node_modules/**,\
  **/*.test.js,\
  **/*.spec.js

# Excluir carpetas que no son código
sonar.exclusions=\
  node_modules/**,\
  coverage/**,\
  dist/**,\
  build/**,\
  **/__tests__/**,\
  **/tests/**,\
  **/*.test.js,\
  **/*.spec.js,\
  jest.config.js,\
  jest.setup.js

# ============================================
# ARCHIVOS A IGNORAR
# ============================================
sonar.exclusions=\
  node_modules/**,\
  coverage/**,\
  __tests__/**,\
  tests/**,\
  **/*.bak,\
  **/*.min.js,\
  DOCUMENTATION_INDEX.md,\
  QUICK_START.md,\
  TESTING.md,\
  TESTING_COMPLETE_FINAL.md,\
  INTEGRATION_TESTS_REPORT.md,\
  FINAL_TESTING_REPORT.md,\
  jest.config.js,\
  jest.setup.js

# ============================================
# CONFIGURACIÓN DE COBERTURA
# ============================================

# Archivo de cobertura LCOV
sonar.javascript.lcov.reportPaths=coverage/lcov.info

# Excluir carpeta de coverage del análisis
sonar.exclusions=coverage/**

# ============================================
# CONFIGURACIÓN ADICIONAL
# ============================================

# Lenguaje
sonar.language=js

# Archivos a ignorar en duplicación
sonar.cpd.exclusions=\
  **/__tests__/**,\
  **/tests/**

# Máximo tamaño de línea permitida (ajustar según necesidad)
sonar.javascript.maxFileSize=900

# ============================================
# EXCLUSIONES FINALES - IMPORTANTE
# ============================================

# Esto es lo MÁS IMPORTANTE:
# Que SonarQube SOLO analice controllers, models, routes, middlewares, config, utils
# Y que IGNORE completamente __tests__, coverage, node_modules

sonar.inclusions=\
  controllers/**,\
  models/**,\
  routes/**,\
  middlewares/**,\
  config/**,\
  utils/**,\
  server.js

sonar.exclusions=\
  __tests__/**,\
  tests/**,\
  coverage/**,\
  node_modules/**,\
  **/*.test.js,\
  **/*.spec.js,\
  **/*.bak,\
  jest.config.js,\
  jest.setup.js,\
  *.md,\
  .env,\
  .git/**
